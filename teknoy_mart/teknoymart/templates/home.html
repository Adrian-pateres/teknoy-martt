{% extends "base.html" %}
{% load static %}

{% block title %}Home | Teknoy Mart{% endblock %}
{% block body_class %}home-page{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block navbar %}
<header class="navbar">
  <div class="logo-text">
    <img src="{% static 'images/logo.png' %}" alt="Teknoy Mart Logo" class="navbar-logo">
    <span>Teknoy Mart</span>
  </div>
  <nav>
    <a href="#">Profile</a>
    <a href="#">Settings</a>
    <a href="#">About</a>
  </nav>
</header>

<main class="home-shell">

  <!-- Search -->
  <div class="home-row search-bar">
    <input id="productSearch" type="text" placeholder="Search products, categories..." aria-label="Search">
    <button type="button" aria-label="Search">üîç</button>
  </div>

  
  <!-- Category chips -->
   <div class="home-row cat-filter" role="tablist" aria-label="Filter by category">
    <button class="chip active" data-cat="all" aria-pressed="true" role="tab">All</button>
    <button class="chip" data-cat="clothing" role="tab">Clothing</button>
    <button class="chip" data-cat="electronics" role="tab">Electronics</button>
    <button class="chip" data-cat="food" role="tab">Food</button>
    <button class="chip" data-cat="accessories" role="tab">Accessories</button>
  </div>


  <!-- Tabs -->
  <div class="home-row tabs">
    <a href="#" class="active">Shop</a>
    <a href="#">Products</a>
    <a href="#">Categories</a>
  </div>

  <!-- Flash Deals (Dynamic Section) -->
  <section class="home-row product-section">
    <div class="section-head">
      <h3>üõí Latest Products</h3>
      <a href="#" class="view-all">View all</a>
    </div>

    <div class="product-grid">
      {% if products %}
        {% for product in products %}
        <article class="product-card" data-cat="{{ product.category|lower }}" data-name="{{ product.title }}">
          <div class="thumb">
            {% if product.image %}
              <img src="{{ product.image.url }}" alt="{{ product.title }}">
            {% else %}
              <img src="{% static 'images/noimage.png' %}" alt="No image available">
            {% endif %}
          </div>
          <div class="meta">
            <p class="title">{{ product.title }}</p>
            <p class="price">‚Ç±{{ product.price }}</p>
          </div>
        </article>
        {% endfor %}
      {% else %}
        <!-- Fallback: Sample products if database is empty -->
        <article class="product-card" data-cat="gadgets" data-name="Wireless Mouse">
          <div class="thumb"><img src="{% static 'images/mouse.jpg' %}" alt="Wireless Mouse"></div>
          <div class="meta">
            <p class="title">Wireless Mouse</p>
            <p class="price">‚Ç±990</p>
          </div>
        </article>
        <article class="product-card" data-cat="apparel" data-name="CIT-U Hoodie">
          <div class="thumb"><img src="{% static 'images/hoodie.png' %}" alt="CIT-U Hoodie"></div>
          <div class="meta">
            <p class="title">CIT-U Hoodie</p>
            <p class="price">‚Ç±1450</p>
          </div>
        </article>
      {% endif %}
    </div>
  </section>

  <!-- Banner -->
  <div class="home-row promo-banner">
    <img src="{% static 'images/promobanner.png' %}" alt="Promo Banner">
  </div>

  <!-- Buttons -->
  <div class="home-row buttons">
    <a href="{% url 'product_list' %}" class="btn btn-primary">Upload Product</a>
    <a href="{% url 'logout' %}" class="btn btn-secondary">Logout</a>
  </div>

</main>
{% endblock %}

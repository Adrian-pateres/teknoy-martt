{% extends "teknoymart/base.html" %}
{% load static %}

{% block title %}Preferences | Teknoy Mart{% endblock %}

{% block content %}
<div class="preferences-page">
  <div class="preferences-header">
    <a href="{% url 'settings' %}" class="back-btn-header">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M19 12H5M12 19l-7-7 7-7" stroke-width="2" stroke-linecap="round"/>
      </svg>
      Back to Settings
    </a>
    <div class="header-content">
      <div class="header-icon">
        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m6-6h6M1 12h6"></path>
        </svg>
      </div>
      <h1>Preferences</h1>
      <p class="subtitle">Customize your Teknoy Mart experience to your liking</p>
    </div>
  </div>

  <div class="preferences-container">
    <form method="post" class="preferences-form">
      {% csrf_token %}

      <!-- Notifications Card -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon notifications-icon">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
          </div>
          <div class="card-header-text">
            <h3>Notifications</h3>
            <p>Manage your notification preferences</p>
          </div>
        </div>

        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                Email Notifications
              </div>
              <div class="setting-description">Receive email updates about your orders and activities</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="email_notifications" name="email_notifications" checked>
              <label for="email_notifications" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                  <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                Push Notifications
              </div>
              <div class="setting-description">Get instant notifications on your device</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="push_notifications" name="push_notifications" checked>
              <label for="push_notifications" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                Order Updates
              </div>
              <div class="setting-description">Notifications about order status and delivery</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="order_updates" name="order_updates" checked>
              <label for="order_updates" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Promotional Emails
              </div>
              <div class="setting-description">Receive updates about new features and promotions</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="promotional_emails" name="promotional_emails">
              <label for="promotional_emails" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- General Settings Card -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon general-icon">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="2" y1="12" x2="22" y2="12"></line>
              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
          </div>
          <div class="card-header-text">
            <h3>General Settings</h3>
            <p>Configure your account preferences</p>
          </div>
        </div>

        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                Language
              </div>
              <div class="setting-description">Choose your preferred language</div>
            </div>
            <div class="select-wrapper">
              <select name="language" id="language">
                <option value="en" selected>English</option>
                <option value="tl">Tagalog</option>
                <option value="ceb">Cebuano</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                Timezone
              </div>
              <div class="setting-description">Set your local timezone</div>
            </div>
            <div class="select-wrapper">
              <select name="timezone" id="timezone">
                <option value="Asia/Manila" selected>Asia/Manila (GMT+8)</option>
                <option value="Asia/Tokyo">Asia/Tokyo (GMT+9)</option>
                <option value="America/New_York">America/New_York (GMT-5)</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect>
                  <polyline points="17 2 12 7 7 2"></polyline>
                </svg>
                Currency
              </div>
              <div class="setting-description">Display prices in your preferred currency</div>
            </div>
            <div class="select-wrapper">
              <select name="currency" id="currency">
                <option value="PHP" selected>Philippine Peso (₱)</option>
                <option value="USD">US Dollar ($)</option>
                <option value="EUR">Euro (€)</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                Profile Visibility
              </div>
              <div class="setting-description">Control who can see your profile</div>
            </div>
            <div class="select-wrapper">
              <select name="profile_visibility" id="profile_visibility">
                <option value="public" selected>Public - Anyone can view</option>
                <option value="citu_only">CIT-U Community Only</option>
                <option value="private">Private - Only you</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- UI Preferences Card -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon ui-icon">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>
            </svg>
          </div>
          <div class="card-header-text">
            <h3>Appearance</h3>
            <p>Customize the look and feel</p>
          </div>
        </div>

        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="12" cy="12" r="5"></circle>
                  <line x1="12" y1="1" x2="12" y2="3"></line>
                  <line x1="12" y1="21" x2="12" y2="23"></line>
                  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                  <line x1="1" y1="12" x2="3" y2="12"></line>
                  <line x1="21" y1="12" x2="23" y2="12"></line>
                  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                Theme Mode
              </div>
              <div class="setting-description">Choose between light and dark mode</div>
            </div>
            <div class="select-wrapper">
              <select name="theme_mode" id="theme_mode">
                <option value="light" selected>Light Mode</option>
                <option value="dark">Dark Mode</option>
                <option value="auto">Auto (System)</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <polyline points="4 7 4 4 20 4 20 7"></polyline>
                  <line x1="9" y1="20" x2="15" y2="20"></line>
                  <line x1="12" y1="4" x2="12" y2="20"></line>
                </svg>
                Text Size
              </div>
              <div class="setting-description">Adjust text size for better readability</div>
            </div>
            <div class="select-wrapper">
              <select name="text_size" id="text_size">
                <option value="small">Small</option>
                <option value="medium" selected>Medium</option>
                <option value="large">Large</option>
              </select>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="9" y1="9" x2="15" y2="15"></line>
                  <line x1="15" y1="9" x2="9" y2="15"></line>
                </svg>
                Reduced Motion
              </div>
              <div class="setting-description">Minimize animations for better performance</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="reduced_motion" name="reduced_motion">
              <label for="reduced_motion" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>
                </svg>
                Compact View
              </div>
              <div class="setting-description">Show more items in less space</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="compact_view" name="compact_view">
              <label for="compact_view" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- Privacy & Security Card -->
      <div class="settings-card">
        <div class="card-header">
          <div class="card-icon security-icon">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
          </div>
          <div class="card-header-text">
            <h3>Privacy & Security</h3>
            <p>Manage your privacy settings</p>
          </div>
        </div>

        <div class="card-body">
          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                  <circle cx="8.5" cy="7" r="4"></circle>
                  <polyline points="17 11 19 13 23 9"></polyline>
                </svg>
                Show Online Status
              </div>
              <div class="setting-description">Let others see when you're active</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="show_online_status" name="show_online_status" checked>
              <label for="show_online_status" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
                Activity History
              </div>
              <div class="setting-description">Save your browsing and search history</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="activity_history" name="activity_history" checked>
              <label for="activity_history" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <circle cx="12" cy="12" r="10"></circle>
                  <path d="M12 6v6l4 2"></path>
                </svg>
                Data Collection
              </div>
              <div class="setting-description">Allow analytics for service improvement</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="data_collection" name="data_collection" checked>
              <label for="data_collection" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-item">
            <div class="setting-info">
              <div class="setting-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                  <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
                Two-Factor Authentication
              </div>
              <div class="setting-description">Add an extra layer of security</div>
            </div>
            <div class="toggle-switch">
              <input type="checkbox" id="two_factor_auth" name="two_factor_auth">
              <label for="two_factor_auth" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <a href="{% url 'settings' %}" class="btn-cancel">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
          Cancel
        </a>
        <button type="submit" class="btn-save">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Save Changes
        </button>
      </div>
    </form>
  </div>
</div>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e9ecef 100%);
    color: #333;
    line-height: 1.6;
  }

  .preferences-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: 40px 20px 80px;
  }

  /* Header Styles */
  .preferences-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .back-btn-header {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: #8B0000;
    text-decoration: none;
    font-weight: 600;
    margin-bottom: 30px;
    padding: 10px 20px;
    border-radius: 10px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: rgba(139, 0, 0, 0.05);
  }

  .back-btn-header:hover {
    background: rgba(139, 0, 0, 0.1);
    transform: translateX(-5px);
    box-shadow: 0 4px 12px rgba(139, 0, 0, 0.15);
  }

  .back-btn-header svg {
    stroke-width: 2.5;
  }

  .header-content {
    max-width: 700px;
    margin: 0 auto;
  }

  .header-icon {
    margin: 0 auto 20px;
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, #8B0000 0%, #a40000 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 40px rgba(139, 0, 0, 0.3);
    animation: rotate 20s linear infinite;
  }

  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .header-icon svg {
    stroke: white;
    stroke-width: 2;
  }

  .header-content h1 {
    font-size: 3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #8B0000 0%, #d32f2f 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 15px;
    letter-spacing: -1px;
  }

  .subtitle {
    font-size: 1.2rem;
    color: #666;
    font-weight: 500;
  }

  /* Settings Container */
  .preferences-container {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }

  /* Settings Card */
  .settings-card {
    background: white;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: all 0.3s ease;
    animation: fadeInUp 0.6s ease forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .settings-card:nth-child(1) { animation-delay: 0.1s; }
  .settings-card:nth-child(2) { animation-delay: 0.2s; }
  .settings-card:nth-child(3) { animation-delay: 0.3s; }
  .settings-card:nth-child(4) { animation-delay: 0.4s; }

  .settings-card:hover {
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
    transform: translateY(-5px);
  }

  /* Card Header */
  .card-header {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 30px;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-bottom: 3px solid #f0f0f0;
  }

  .card-icon {
    width: 60px;
    height: 60px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .notifications-icon {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }

  .general-icon {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
  }

  .ui-icon {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
  }

  .security-icon {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    color: white;
  }

  .card-icon svg {
    stroke-width: 2;
  }

  .card-header-text h3 {
    font-size: 1.6rem;
    font-weight: 800;
    color: #333;
    margin-bottom: 5px;
  }

  .card-header-text p {
    font-size: 0.95rem;
    color: #666;
    font-weight: 500;
  }

  /* Card Body */
  .card-body {
    padding: 20px 30px 30px;
  }

  /* Setting Item */
  .setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 0;
    border-bottom: 1px solid #f5f5f5;
    gap: 20px;
  }

  .setting-item:last-child {
    border-bottom: none;
  }

  .setting-item:hover {
    background: linear-gradient(to right, transparent, rgba(139, 0, 0, 0.02), transparent);
    margin: 0 -15px;
    padding-left: 15px;
    padding-right: 15px;
    border-radius: 12px;
  }

  .setting-info {
    flex: 1;
  }

  .setting-label {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 5px;
  }

  .setting-label svg {
    stroke-width: 2;
    color: #8B0000;
  }

  .setting-description {
    font-size: 0.9rem;
    color: #666;
    line-height: 1.5;
  }

  /* Toggle Switch */
  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 60px;
    height: 30px;
    flex-shrink: 0;
  }

  .toggle-switch input[type="checkbox"] {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .toggle-label {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #ccc;
    border-radius: 30px;
    transition: all 0.3s ease;
  }

  .toggle-label:before {
    content: "";
    position: absolute;
    height: 24px;
    width: 24px;
    left: 3px;
    bottom: 3px;
    background: white;
    border-radius: 50%;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  input[type="checkbox"]:checked + .toggle-label {
    background: linear-gradient(135deg, #8B0000 0%, #a40000 100%);
  }

  input[type="checkbox"]:checked + .toggle-label:before {
    transform: translateX(30px);
  }

  input[type="checkbox"]:focus + .toggle-label {
    box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.2);
  }

  /* Select Wrapper */
  .select-wrapper {
    position: relative;
    min-width: 220px;
    flex-shrink: 0;
  }

  .select-wrapper select {
    width: 100%;
    padding: 10px 40px 10px 15px;
    font-size: 0.95rem;
    font-weight: 600;
    color: #333;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    cursor: pointer;
    appearance: none;
    transition: all 0.3s ease;
    font-family: inherit;
  }

  .select-wrapper select:hover {
    border-color: #8B0000;
    background: white;
  }

  .select-wrapper select:focus {
    outline: none;
    border-color: #8B0000;
    box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.1);
  }

  .select-wrapper::after {
    content: "";
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid #8B0000;
    pointer-events: none;
  }

  /* Action Buttons */
  .action-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 15px;
    padding: 30px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
    animation: fadeInUp 0.6s ease forwards;
    animation-delay: 0.5s;
    opacity: 0;
  }

  .btn-cancel,
  .btn-save {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 30px;
    font-size: 1rem;
    font-weight: 700;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    font-family: inherit;
  }

  .btn-cancel {
    background: #f5f5f5;
    color: #666;
  }

  .btn-cancel:hover {
    background: #e0e0e0;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .btn-save {
    background: linear-gradient(135deg, #8B0000 0%, #a40000 100%);
    color: white;
    box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3);
  }

  .btn-save:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);
  }

  .btn-cancel svg,
  .btn-save svg {
    stroke-width: 2.5;
  }

  /* Success Message */
  .success-message {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
    color: white;
    padding: 15px 25px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
    display: flex;
    align-items: center;
    gap: 12px;
    animation: slideIn 0.3s ease;
    z-index: 1000;
  }

  @keyframes slideIn {
    from {
      transform: translateX(400px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .header-content h1 {
      font-size: 2rem;
    }

    .card-header {
      flex-direction: column;
      text-align: center;
    }

    .setting-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }

    .select-wrapper {
      width: 100%;
      min-width: auto;
    }

    .action-buttons {
      flex-direction: column;
    }

    .btn-cancel,
    .btn-save {
      width: 100%;
      justify-content: center;
    }
  }

  /* Loading State */
  .btn-save.loading {
    pointer-events: none;
    opacity: 0.7;
  }

  .btn-save.loading::after {
    content: "";
    width: 16px;
    height: 16px;
    margin-left: 10px;
    border: 2px solid white;
    border-radius: 50%;
    border-top-color: transparent;
    animation: spin 0.6s linear infinite;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('.preferences-form');
    const saveBtn = document.querySelector('.btn-save');

    // Auto-save indication
    form?.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Add loading state
      saveBtn.classList.add('loading');
      saveBtn.textContent = 'Saving...';

      // Simulate save (replace with actual AJAX call)
      setTimeout(() => {
        saveBtn.classList.remove('loading');
        saveBtn.innerHTML = `
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Saved Successfully!
        `;

        // Show success message
        const successMsg = document.createElement('div');
        successMsg.className = 'success-message';
        successMsg.innerHTML = `
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <polyline points="20 6 9 17 4 12" stroke-width="2"></polyline>
          </svg>
          <span>Preferences saved successfully!</span>
        `;
        document.body.appendChild(successMsg);

        // Remove success message after 3 seconds
        setTimeout(() => {
          successMsg.style.animation = 'slideIn 0.3s ease reverse';
          setTimeout(() => successMsg.remove(), 300);
        }, 3000);

        // Reset button after 2 seconds
        setTimeout(() => {
          saveBtn.innerHTML = `
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Save Changes
          `;
        }, 2000);
      }, 1500);
    });

    // Theme mode change preview
    const themeSelect = document.getElementById('theme_mode');
    themeSelect?.addEventListener('change', function() {
      if (this.value === 'dark') {
        document.body.style.filter = 'invert(1) hue-rotate(180deg)';
      } else {
        document.body.style.filter = 'none';
      }
    });
  });
</script>
{% endblock %}
